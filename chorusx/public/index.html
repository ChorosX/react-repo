<head>
  <style> body { margin: 0; } </style>

  <script src="//unpkg.com/react/umd/react.production.min.js"></script>
  <script src="//unpkg.com/react-dom/umd/react-dom.production.min.js"></script>
  <script src="//unpkg.com/babel-standalone"></script>
  <script src="//unpkg.com/three"></script>

  <script src="//unpkg.com/react-globe.gl"></script>
  <!--<script src="../../dist/react-globe.gl.js"></script>-->
</head>

<body>
<div id="globeViz"></div>

<script type="text/jsx">

  const N = 300;
  setInterval(async function getSatalites() {
    const response = await fetch('http://localhost:5000/satdata/25544');
    console.log("updating")
    let data = await response.json()
    console.log(data)

    let jsonData = data.positions[0]
    let lat = jsonData.satlatitude
    let long = jsonData.satlongitude


    const gData = [...Array(N).keys()].map(() => ({
      lat: lat,
      lng: long,
      size: 0.1,
      color: 'red'
    }));

    var loader = new THREE.GLTFLoader();
    loader.crossOrigin = true;
    loader.load( 'https://s3-us-west-2.amazonaws.com/s.cdpn.io/39255/ladybug.gltf', function ( data ) {
    
      
        var object = data.scene;
         object.position.set(0, -10, -0.75);
         object.scale.set(500,500,500)
    //     object.rotation.set(Math.PI / -2, 0, 0);
    
    //     TweenLite.from( object.rotation, 1.3, {
    //       y: Math.PI * 2,
    //       ease: 'Power3.easeOut'
    //     });
    
        TweenMax.from( object.position, 3, {
          y: -8,
          yoyo: true,
          repeat: -1,
          ease: 'Power2.easeInOut'
        });
        //object.position.y = - 95;
        scene.add( object );
      //, onProgress, onError );
    });

    ReactDOM.render(
      <Globe
        globeImageUrl="//unpkg.com/three-globe/example/img/earth-day.jpg"
        pointsData={gData}
        pointAltitude="size"
        pointColor="color"
      />,
      document.getElementById('globeViz')
    );

  }, 3000)


</script>
</body>